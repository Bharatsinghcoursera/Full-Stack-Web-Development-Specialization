<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Matching Game Part 4</title>
        <meta charset="UTF-8">
        <style>
            body {margin: 0px;}
            h1, p {margin-left: 8px; margin-right: 8px;}
            img, div {position: absolute;}
            div {height: 500px; width: 500px;}
            #rightSide {left: 500px; border-left: 1px solid black;}
        </style>
    </head>
    <body onload="generateFaces();">
        <h1>Matching Game</h1>
        <p>Click on the extra smiling face on the left</p>
        <div id="leftSide"></div>
        <div id="rightSide"></div>
        <script>
            var numberOfFaces = 5;
            var theLeftSide = document.getElementById("leftSide");
            var theRightSide = document.getElementById("rightSide");
            var theBody = document.getElementsByTagName("body")[0];

            function clearSide(side){
                while(side.childNodes.length > 0){
                     side.removeChild(side.firstChild);
                }
            };

            function generateLeftSideFaces(){
                for(i=0 ; i < numberOfFaces ; i++){
                    var newImg = document.createElement("img");
                    newImg.src = "smile.png";
                    var topPosition = Math.floor(Math.random() * 401);
                    newImg.style.top= topPosition + "px";
                    var leftPosition = Math.floor(Math.random() * 401);
                    newImg.style.left= leftPosition + "px";
                    theLeftSide.appendChild(newImg);
                }
            };

            function cloneFacesToRightSide(){
                var leftSideImages = theLeftSide.cloneNode(true);
                leftSideImages.removeChild(leftSideImages.lastChild);
                theRightSide.appendChild(leftSideImages);
            };

            function attachHandlers(){
                theBody.onclick = function gameOver(){
                    alert("Game Over!");

                    theBody.onclick = null;
                    theLeftSide.lastChild.onclick = null;
                };

                theLeftSide.lastChild.onclick = function nextLevel(event){
                    event.stopPropagation();
                    numberOfFaces += 5;
                    clearSide(theLeftSide);
                    clearSide(theRightSide);
                    generateFaces();
                };
            };

            function generateFaces(){               
                generateLeftSideFaces();
                cloneFacesToRightSide();
                attachHandlers();              
            };
        </script>
    </body>
</html>